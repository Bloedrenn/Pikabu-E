{% extends "layouts/base.html" %}
{% load static %}

{% block title %}
  {{ block.super }} | Поиск постов
{% endblock title %}

{% block styles %}
  <link rel="stylesheet" href="{% static "blog/css/includes/post_container.css" %}">
{% endblock styles %}

{% block scripts %}
    <script src="{% static "blog/js/favorites.js" %}" type="module" defer></script>
{% endblock scripts %}

{% block content %}
  <h1>Поиск постов</h1>

  {% comment %} method="GET" Указывать необязательно {% endcomment %}
  <form>
    <input type="text" name="search" placeholder="Введите запрос" value="{{ request.GET.search }}">

    <label>
      <input type="checkbox" name="search_category" {% if request.GET.search_category %}checked{% endif %}>
      Искать в категориях
    </label>

    <label>
      <input type="checkbox" name="search_tag" {% if request.GET.search_tag %}checked{% endif %}>
      Искать в тегах
    </label>

    <button type="submit">Найти</button>
    <button type="reset">Очистить</button>
  </form>

  {% if search_performed %}
    {% if posts %}
      <h2>Найден(-о) {{ paginator.count }} пост(-а, -ов):</h2>
      
      {% for post in posts %}
        <div class="container">
          {% include 'blog/includes/post_container.html' %}
        </div>
      {% endfor %}

      {% include "blog/includes/pagination.html" %}
    {% else %}
      <p>По вашему запросу ничего не найдено.</p>
    {% endif %}
  {% else %}
    <p>Введите запрос для поиска постов</p>
  {% endif %}
{% endblock content %}